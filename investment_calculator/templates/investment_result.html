{% extends 'base.html' %}
{% load humanize %}

{% block title %}Compound Interest Results{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">Results</h1>
    
    <!-- Plot Section -->
    <div class="row">
        <div class="col-12">
            <!-- Outer div to handle the border -->
            <div class="border-container">
                <div id="graph"></div>
            </div>
        </div>
    </div>

    <!-- Table Section -->
    <div class="row mt-4">
        <div class="col-12">
            <h3 class="text-center">Detailed Values</h3>
            <!-- Outer div to handle the border -->
            <div class="border-container">
                <div class="table-container">
                    <table class="table table-striped mt-2">
                        <thead>
                            <tr>
                                <th></th>
                                {% for row in table_data %}
                                    <th class="text-center">Year {{ row.year }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th>Future Value</th>
                                {% for row in table_data %}
                                    <td class="text-right">${{ row.future_value|floatformat:2|intcomma }}</td>
                                {% endfor %}
                            </tr>
                            <tr>
                                <th>Total Contribution</th>
                                {% for row in table_data %}
                                    <td class="text-right">${{ row.total_contribution|floatformat:2|intcomma }}</td>
                                {% endfor %}
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Back Button -->
    <div class="text-center mt-4">
        <a href="{% url 'calculate_investment' %}" class="btn btn-secondary">Try Again</a>
    </div>
</div>

<!-- Include Plotly.js via CDN -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
    var graph = JSON.parse('{{ graph_json|escapejs }}');
    var config = {responsive: true};
    Plotly.newPlot('graph', graph.data, graph.layout, config);
</script>

{% endblock %}
